{"version":3,"file":"static/chunks/pages/index-e450b2ec00dd62c6.js","mappings":"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","sources":["webpack://_N_E/./src/pages/QuestionaireBox.tsx","webpack://_N_E/./src/pages/Questionair.tsx","webpack://_N_E/./src/pages/index.page.tsx","webpack://_N_E/"],"sourcesContent":["import { Error } from \"@kiebitz-oss/ui\";\nimport clsx from \"clsx\";\nimport { Control, Controller } from \"react-hook-form\";\n\ntype QuestionBoxProps = {\n  name: string;\n  control: Control;\n  error?: boolean;\n  errorMessage?: string;\n};\n\nexport const QuestionaireBox: React.FC<QuestionBoxProps> = ({\n  children,\n  control,\n  name,\n  error,\n  errorMessage = \"Ihre letzte Impfung muss mehr. Bitte haben Sie Verständnis für die aktuellen Regeln. Diese können sich ändern, bleiben Sie informiert.\",\n}) => {\n  return (\n    <Controller\n      control={control}\n      name={name}\n      render={({ field: { onChange, value } }) => {\n        return (\n          <fieldset>\n            <div className=\"flex flex-col gap-4 md:px-0 lg:w-full xl:flex-row xl:gap-2\">\n              <div\n                className={clsx(\n                  \"flex flex-col gap-5 py-3 px-4 font-semibold bg-white rounded shadow-box sm:w-[500px]\",\n                  {\n                    [\"border-error border-2\"]: error,\n                  }\n                )}\n              >\n                <div className=\"flex justify-between pr-4\">\n                  <legend>\n                    <h3>{children}</h3>\n                  </legend>\n                </div>\n\n                <div className=\"flex gap-8 items-center mb-2\">\n                  <label\n                    htmlFor={`${name}-yes`}\n                    className=\"flex gap-2 items-center cursor-pointer\"\n                  >\n                    <input\n                      className=\"radio\"\n                      type=\"radio\"\n                      id={`${name}-yes`}\n                      name={name}\n                      defaultChecked={value === true}\n                      onChange={() => onChange(true)}\n                      value=\"1\"\n                    />\n                    ja\n                  </label>\n\n                  <label\n                    htmlFor={`${name}-no`}\n                    className=\"flex gap-2 items-center cursor-pointer\"\n                  >\n                    <input\n                      className=\"radio\"\n                      type=\"radio\"\n                      id={`${name}-no`}\n                      name={name}\n                      defaultChecked={value === false}\n                      onChange={() => onChange(false)}\n                      value=\"0\"\n                    />\n                    nein\n                  </label>\n                </div>\n              </div>\n\n              {error && (\n                <Error className=\"mx-4 sm:w-[500px] xl:mt-2\">\n                  {errorMessage}\n                </Error>\n              )}\n            </div>\n          </fieldset>\n        );\n      }}\n    />\n  );\n};\n","import { Button, Error } from \"@kiebitz-oss/ui\";\nimport { t, Trans } from \"@lingui/macro\";\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport { Resolver, SubmitHandler, useForm } from \"react-hook-form\";\nimport { QuestionaireBox } from \"./QuestionaireBox\";\n\ninterface FormData {\n  q1Value: boolean;\n  q2Value: boolean;\n  q3Value: boolean;\n  q4Value: boolean;\n}\n\nconst resolver: Resolver = (values) => {\n  const errors = {};\n\n  return {\n    values,\n    errors,\n  };\n};\n\nexport const Questionaire: React.FC = () => {\n  const [error, setError] = useState<boolean>(false);\n  const [valid, setValid] = useState<boolean>(false);\n  const router = useRouter();\n\n  const { watch, control, handleSubmit, resetField } = useForm({\n    reValidateMode: \"onChange\",\n    resolver,\n  });\n\n  const onSubmit: SubmitHandler<FormData> = () => {\n    if (valid) {\n      router.push(\"/finder\");\n    } else {\n      setError(true);\n    }\n  };\n\n  const q1Value = watch(\"q1\");\n  const q2Value = watch(\"q2\");\n  const q3Value = watch(\"q3\");\n  const q4Value = watch(\"q4\");\n\n  useEffect(() => {\n    const subscription = watch((values, { name, type }) => {\n      // reset global error\n      setError(false);\n\n      // reset later fields\n      if (type === \"change\") {\n        switch (name) {\n          case \"q1\": {\n            resetField(\"q2\");\n            resetField(\"q3\");\n            resetField(\"q4\");\n          }\n\n          case \"q2\": {\n            resetField(\"q3\");\n            resetField(\"q4\");\n          }\n\n          case \"q3\": {\n            resetField(\"q4\");\n          }\n        }\n      }\n\n      setValid(values[\"q3\"] === false || values[\"q4\"] === false || false);\n    });\n\n    return () => subscription.unsubscribe();\n  }, [watch, resetField, setValid]);\n\n  return (\n    <form\n      className=\"flex flex-col mb-6 md:mb-8 lg:max-w-full flex-grow\"\n      onSubmit={handleSubmit(onSubmit)}\n    >\n      <div className=\"flex flex-col flex-1 gap-5\">\n        <QuestionaireBox control={control} name=\"q1\">\n          <Trans id=\"user.welcome.question1_value\">\n            Handelt es sich um eine Booster-Impfung?\n          </Trans>\n        </QuestionaireBox>\n\n        {q1Value === true && (\n          <QuestionaireBox\n            control={control}\n            name=\"q2\"\n            error={q2Value === false}\n            errorMessage={t({\n              id: \"user.welcome.question2_error\",\n              message:\n                \"Es müssen 6 Monate seit Ihrem letzten Impftermin vergangen sein, bevor Sie sich boostern lassen können.\",\n            })}\n          >\n            <Trans id=\"user.welcome.question2_value\">\n              Liegt Ihre letzte Impfung mehr als 6 Monate zurück?\n            </Trans>\n          </QuestionaireBox>\n        )}\n\n        {(q1Value === false || q2Value === true) && (\n          <QuestionaireBox control={control} name=\"q3\">\n            <Trans id=\"user.welcome.question3_value\">\n              Sind sie schwanger oder jünger als 30?\n            </Trans>\n          </QuestionaireBox>\n        )}\n\n        {(q1Value === false || q2Value === true) && q3Value === true && (\n          <QuestionaireBox\n            control={control}\n            name=\"q4\"\n            error={q4Value === true}\n            errorMessage={t({\n              id: \"user.welcome.question4_error\",\n              message:\n                \"Leider gibt es aktuell (noch) keine Termine für Kinderimpfungen über das Portal. Wir bemühen uns das Angebot schnellstmöglich zu erweitern und bitten bis dahin um Geduld.\",\n            })}\n          >\n            <Trans id=\"user.welcome.question4_value\">\n              Sind Sie jünger als 12?\n            </Trans>\n          </QuestionaireBox>\n        )}\n      </div>\n\n      {error && !valid && (\n        <Error className=\"mx-8 mt-8 md:mx-0\">\n          <Trans id=\"user.welcome.form_error\">\n            Bitte beantworten Sie alle Fragen, denn sonst können wir keine\n            Termine für Sie heraussuchen. Alle Ihre persönlichen Daten werden\n            nur auf Ihrem Endgerät gespeichert und nicht an einen Server\n            übermittelt oder weitergegeben.\n          </Trans>\n        </Error>\n      )}\n\n      <Button\n        type=\"submit\"\n        variant={valid ? \"primary\" : \"invalid\"}\n        className=\"mx-4 mt-8 sm:self-start sm:mx-0 md:mx-0\"\n      >\n        <Trans id=\"user.welcome.button\">Weiter zum Termin</Trans>\n      </Button>\n    </form>\n  );\n};\n","// Kiebitz - Privacy-Friendly Appointments\n// Copyright (C) 2021-2021 The Kiebitz Authors\n// README.md contains license information.\n\nimport { Text, Title } from \"@kiebitz-oss/ui\";\nimport { Trans } from \"@lingui/macro\";\nimport type { NextPage } from \"next\";\nimport { Questionaire } from \"./Questionair\";\n\nconst UserStartPage: NextPage = () => {\n  return (\n    <main id=\"welcome\">\n      <Title\n        variant=\"h1\"\n        as=\"h2\"\n        data-testid=\"view.title\"\n        className=\"ml-4 sm:ml-0\"\n      >\n        <Trans id=\"user.welcome.title\">Willkommen!</Trans>\n      </Title>\n\n      <Text className=\"mb-4 ml-4 sm:ml-0\">\n        <Trans id=\"user.welcome.intro-1\">\n          Sie sind jetzt nur noch wenige Klicks von Ihrem Termin entfernt.\n        </Trans>\n      </Text>\n\n      <Text className=\"mb-8 ml-4 sm:ml-0\">\n        <Trans id=\"user.welcome.intro-2\">\n          Wir speichern generell keine persönlichen Daten, aber haben ein paar\n          Fragen, damit Sie den richtigen Impfstoff erhalten.\n        </Trans>\n      </Text>\n\n      <Questionaire />\n    </main>\n  );\n};\n\nexport default UserStartPage;\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/\",\n      function () {\n        return require(\"private-next-pages/index.page.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/\"])\n      });\n    }\n  "],"names":["QuestionaireBox","children","control","name","error","errorMessage","render","field","onChange","value","className","clsx","htmlFor","type","id","defaultChecked","resolver","values","errors","Questionaire","setError","useState","valid","setValid","router","useRouter","watch","handleSubmit","resetField","useForm","reValidateMode","q1Value","q2Value","q3Value","q4Value","useEffect","subscription","unsubscribe","onSubmit","push","variant","as","window","__NEXT_P"],"sourceRoot":""}